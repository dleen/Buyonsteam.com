@(gamePrices: List[(Game, Option[Price])], priceStats: PriceStats)

<!DOCTYPE html>

<html lang="en">
<head>
	<title>Buy Or Wait</title>
	<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
	<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/bootstrap-responsive.css")">
	<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/jquery-ui-1.9.1.custom.css")">
	<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
	<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
	<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("img/glyphicons-halflings.png")">
	<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("img/glyphicons-halflings-white.png")">
</head>
<body>

	<div class="container-narrow" id="main-div">

		<div class="row-fluid">
			<div id="my-hero">
				<h1>@{if (gamePrices.isEmpty) "No Name" else gamePrices.head._1.name }</h1>
			</div>
			<div id="small-search">
				<form class="form-search" action="@routes.Application.gameP()">
					<input type="search" id="searchbox" class="input-large autocomplete" name="g" placeholder="Search for a game..." data-url="@{routes.Application.autocompleteSearch()}" autocomplete="off">
				</form>
			</div>
		</div>



		<div class="row-fluid">
			<div class="span12 well" id="recc">
				<h3>Recommendation: <font color="#51a351">buy</font> or <font color="#bd362f">don't buy</font> on Steam or neutral</h3>
			</div>
		</div>

		<div class="row-fluid">
			<div class="span6">
				@Option(gamePrices).filterNot(_.isEmpty).map { x =>
				<table class="table table-striped table-hover" id="table-5">
					<thead>
						<tr>
							<th><h4>Store</h4></th>
							<th><h4>Price</h4></th>
							<th><h4>Price</h4></th>
						</tr>
					</thead>
					<tbody>
						@x.map { 
						case (game, price) => {
						<tr>
							<td>@game.store</td>
							<td><a href="@game.storeUrl">@game.name</a></td>
							<td>$@price.map(_.priceOnX).getOrElse{<em>n/a</em>}</td>
						</tr>
					}
				}
			</tbody>
		</table>
	}.getOrElse{
	<div class="well" id="recc">
		<em>Nothing on sale today!</em>
	</div>
}
</div>
<div class="span6">
	<table class="table table-hover">
		<thead>
			<tr>
				<th colspan="2"><h4>Price Stats</h4></th>
				<th><h4>Store</h4></th>
				<th><h4>When</h4></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Average</td>
				<td>$@priceStats.avg.toString.take(5)</td>
				<td></td>
				<td></td>
			</tr>
			<tr class="success">
				<td>Lowest</td>
				<td>$@priceStats.min</td>
				<td>Steam Store</td>
				<td>@priceStats.minD</td>
			</tr>
			<tr class="error">
				<td>Highest</td>
				<td>$@priceStats.max</td>
				<td>Steam Store</td>
				<td>@priceStats.maxD</td>
			</tr>
		</tbody>
	</table>
</div>
</div>

<div class="row-fluid">
	<div id="chart-cont"></div>
</div>
</div>

<script src="@routes.Assets.at("javascripts/jquery.min.js")"></script> 
<script src="@routes.Assets.at("javascripts/jquery-ui-1.9.1.custom.min.js")"></script> 
<script src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script> 
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script>    
$('input.autocomplete').each( function() {
	var $input = $(this);
	var serverUrl = $input.data('url');
	$input.autocomplete({ source:serverUrl });
});
</script>
<script type="text/javascript">
$(function () {
var chart; // globally available
$(document).ready(function() {

	$.getJSON("@routes.Application.priceData(gamePrices.head._1.name)", function(data) {
		chart = new Highcharts.Chart({
			chart: {
				renderTo: 'chart-cont',
				type: 'line',
				backgroundColor: null
			},

			xAxis: {
				type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
            day: '%e. %b',
            week: '%e. %b'
        }
    },


    credits: {
    	enabled: false
    },

    series: data
});
	});
});
});
</script>
</body>
</html>