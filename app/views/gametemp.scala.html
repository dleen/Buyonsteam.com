@(gamePrices: List[(Game, Option[Price])])

<!DOCTYPE html>

<html lang="en">
<head>
	<title>Buy Or Wait</title>
	<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
	<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/bootstrap-responsive.css")">
	<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/jquery-ui-1.9.1.custom.css")">
	<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
	<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
	<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("img/glyphicons-halflings.png")">
	<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("img/glyphicons-halflings-white.png")">

</head>
<body>

	<div class="container-narrow" id="main-div">

		<div class="row-fluid">
			<div class="span12">
				<div id="my-hero">
				<h1>Game Name Here</h1>
			</div>
		</div>
		</div>


    <div class="row-fluid">
      <div class="span12 well" id="recc">
        <h3>Recommendation: <font color="#51a351">buy</font> or <font color="#bd362f">don't buy</font> on Steam</h3>
      </div>
  </div>

		<div class="row-fluid">
			<div class="span6">
				@Option(gamePrices).filterNot(_.isEmpty).map { x =>
				<table class="table table-striped table-hover" id="table-5">
					<thead>
						<tr>
							<th><h4>Store</h4></th>
							<th><h4>Price</h4></th>
							<th><h4>Price</h4></th>
						</tr>
					</thead>
					<tbody>
						@x.map { 
						case (game, price) => {
						<tr>
							<td>@game.store</td>
							<td><a href="@game.storeUrl">@game.name</a></td>
							<td>$@price.map(_.priceOnX).getOrElse{<em>n/a</em>}</td>
						</tr>
						}
						}
					</tbody>
				</table>
				}.getOrElse{
					<div class="well" id="recc">
						<em>Nothing on sale today!</em>
					</div>
					}
			</div>
        <div class="span6">
          <table class = "table table-hover">
            <thead>
              <tr>
                <th colspan="2"><h4>Price Stats</h4></th>
                <th><h4>Store</h4></th>
                <th><h4>When</h4></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Current</td>
                <td>$19.99</td>
                <td>Steam Store</td>
                <td>22/7/2012</td>
              </tr>
              <tr class="success">
                <td>Lowest</td>
                <td>$19.99</td>
                <td>Steam Store</td>
                <td>22/7/2012</td>
              </tr>
              <tr class="error">
                <td>Highest</td>
                <td>$19.99</td>
                <td>Steam Store</td>
                <td>22/7/2012</td>
              </tr>
            </tbody>
          </table>
        </div>
		</div>

		<div class="row-fluid">
			<div id="chart-cont"></div>
		</div>
	</div>

<script src="@routes.Assets.at("javascripts/jquery.min.js")"></script> 
<script src="@routes.Assets.at("javascripts/jquery-ui-1.9.1.custom.min.js")"></script> 
<script src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script> 
<script src="@routes.Assets.at("javascripts/highstock.js")"></script>
<script src="@routes.Assets.at("javascripts/modules/exporting.js")"></script>
<script>    
$('input.autocomplete').each( function() {
	var $input = $(this);
	var serverUrl = $input.data('url');
	$input.autocomplete({ source:serverUrl });
});
</script>
<script type="text/javascript">
$(function() {
	var seriesOptions = [],
	yAxisOptions = [],
	seriesCounter = 0,
	names = ['MSFT', 'AAPL', 'GOOG'],
	colors = Highcharts.getOptions().colors;

	$.each(names, function(i, name) {

		$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename='+ name.toLowerCase() +'-c.json&callback=?', function(data) {

			seriesOptions[i] = {
				name: name,
				data: data,
				step: true
			}
      // As we're loading the data asynchronously, we don't know what order it will arrive. So
      // we keep a counter and create the chart when all the data is loaded.
      seriesCounter++;

      if (seriesCounter == names.length) {
      	createChart();
      }
  });
	});

  // create the chart when all data is loaded
  function createChart() {

  	chart = new Highcharts.StockChart({
  		chart: {
  			renderTo: 'chart-cont',
  			backgroundColor: null
  		},

  		rangeSelector: {
  			selected: 4
  		},

  		yAxis: {
  			labels: {
  				formatter: function() {
  					return (this.value > 0 ? '+' : '') + this.value + '%';
  				}
  			},
  			plotLines: [{
  				value: 0,
  				width: 2,
  				color: 'silver'
  			}]
  		},

  		plotOptions: {
  			series: {
  				compare: 'percent'
  			}
  		},

  		credits: {
  			enabled: false
  		},

  		tooltip: {
  			pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
  			valueDecimals: 2
  		},

  		series: seriesOptions
  	});
  }
});
</script>
</body>
</html>